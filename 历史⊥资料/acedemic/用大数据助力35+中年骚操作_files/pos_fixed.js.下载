function fixed(t,e){var i=/ipod|iphone|ipad|android|blackberry|mobile|webos|windows phone/i.test(navigator.userAgent);if(!($.browser.ie&&$.browser.version|!0||i)&&t&&0!=t.length){var n,o=e&&e.gap||10,r=e&&e.fixedBound||"top",d=$(window),c=$.map(t,function(t){var t=$(t),e=t.offset(),i=e.top,n=e.left;return{node:t,top:i,left:n,width:t.width(),bottom:i+t.outerHeight(!0)}}).sort(function(t,e){return t.top-e.top});return{init:function(){var e=this.container=$('<div class="fixed-fields"></div>');e.hide().appendTo(t.eq(0).parent().css("position","relative")),this.bindResizeEvent(),this.bindScrollEvent(),this.setupChecker(),this.cache={bodyWidth:$("body").width()},d.trigger("resize")},bindScrollEvent:function(){var t=this;d.bind("scroll",function(){var e;return function(i){e&&clearTimeout(e),e=setTimeout(function(){t.handleScroll.call(t,i)},0)}}())},bindResizeEvent:function(){var t=this;d.bind("resize",function(){var e;return function(i){e&&clearTimeout(e),e=setTimeout(function(){t.handleResize.call(t,i)},20)}}())},setupChecker:function(){var e=this;e.getChecker()(t,function(){d.trigger("resize")})},getChecker:function(){var t=window.MutationObserver||window.WebKitMutationObserver;if(t)return function(e,i){$.each(e,function(e,n){var o=new t(function(t,e){(t[0].addedNodes.length||t[0].removedNodes.length)&&i()});o.observe(n,{childList:!0,subtree:!0})})};var e=document.documentElement,i=!!e.addEventListener&&function(){var t,n,o=!1;return n=e.id,t=function(){e.removeEventListener("DOMAttrModified",t,!1),i=!0,e.id=n},e.addEventListener("DOMAttrModified",t,!1),e.id="nw",o="nw"!==e.id,e.id=n,o}();return i?function(t,e){function i(t){($.contains(t.currentTarget,t.relatedNode)||t.currentTarget===t.relatedNode)&&e()}$.each(t,function(t,e){e.addEventListener("DOMNodeInserted",i,!1),e.addEventListener("DOMNodeRemoved",i,!1)})}:this.checkingTimer()},checkingTimer:function(){var t=this,e=[];return clearInterval(t.timer),t.timer=setInterval(function(){for(var t,i=!1,n=0,o=c.length;n<o;n++)if(t=c[n],t.node.outerHeight(!0)!==t.bottom-t.top){i=!0;break}i&&$.each(e,function(t,e){e()})},100),function(t,i){e.push(i)}},handleScroll:function(){var t=d.scrollTop(),e=c[c.length-1].bottom+o;!n&&t>=e?this.setFixed():n&&t<=e&&this.setStatic()},setFixed:function(){var t=this,e=o;$.each(c,function(i){var n=c[i],o=n.node,d=$(o).offset().left,s=($(o).width(),$("body").width());d+=(s-t.cache.bodyWidth)/2,"top"===r?o.css({position:"fixed",top:e,bottom:"auto",left:d,width:n.width}):"bottom"===r&&o.css({position:"fixed",top:"auto",bottom:e,left:d,width:n.width}),e+=o.height(),n.left=d,t.cache.bodyWidth=s}),n=!0},setStatic:function(){$.each(c,function(t){var e=c[t],i=e.node;e.top;i.css({position:"static"})}),n=!1},handleResize:function(){n=!1,this.handleScroll()}}}}